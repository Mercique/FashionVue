<template>
  <div class="search">
    <button
      type="button"
      class="search-show"
      @click="showField()"
      v-show="showSearch"
    >
      <svg
        width="27"
        height="28"
        viewBox="0 0 27 28"
        fill="none"
        xmlns="http://www.w3.org/2000/svg"
      >
        <path
          d="M19.0596 17.6259C20.6713 15.8658 21.6282 13.6048 21.7698 11.2225C21.9113 8.84018 21.2288 6.48173 19.8369 4.54318C18.445 2.60463 16.4285 1.20404 14.126 0.576619C11.8234 -0.0508009 9.3751 0.13316 7.19217 1.09761C5.00923 2.06205 3.22463 3.74825 2.13804 5.87302C1.05145 7.9978 0.729054 10.4318 1.225 12.7661C1.72094 15.1005 3.00501 17.1932 4.86158 18.6927C6.71814 20.1922 9.03413 21.0072 11.4206 21.0009C13.673 21.004 15.8645 20.27 17.6606 18.9109L25.4086 26.7179C25.4941 26.807 25.5965 26.8781 25.7099 26.927C25.8232 26.9759 25.9452 27.0017 26.0686 27.0029C26.1923 27.0033 26.3148 26.9782 26.4283 26.9292C26.5419 26.8801 26.6441 26.8082 26.7286 26.7179C26.9025 26.537 26.9997 26.2958 26.9997 26.0449C26.9997 25.794 26.9025 25.5528 26.7286 25.3719L19.0596 17.6259ZM2.88662 10.5009C2.89946 8.81563 3.41094 7.17187 4.35659 5.77685C5.30224 4.38183 6.63972 3.29801 8.20044 2.662C9.76115 2.02599 11.4752 1.86627 13.1266 2.20298C14.7779 2.53969 16.2926 3.35775 17.4797 4.55404C18.6668 5.75033 19.4732 7.27129 19.7972 8.92519C20.1212 10.5791 19.9483 12.2919 19.3002 13.8476C18.6522 15.4034 17.5581 16.7325 16.1559 17.6674C14.7536 18.6023 13.1059 19.1011 11.4206 19.1009C9.14916 19.0901 6.97482 18.1784 5.37484 16.566C3.77486 14.9537 2.87998 12.7724 2.88662 10.5009Z"
          fill="#E8E8E8"
        />
      </svg>
    </button>
    <form
      action="#"
      class="search-form"
      @submit.prevent="filter(searchLine)"
      v-show="showInput"
    >
      <input type="text" class="search-form-field" @input="filter(searchLine)" v-model="searchLine" />
      <button class="search-form-btn" type="submit">
        <svg
          width="20"
          height="20"
          viewBox="0 0 48 48"
          fill="none"
          xmlns="http://www.w3.org/2000/svg"
        >
          <path
            d="M30.39 0.739994C27.6488 0.739994 24.9691 1.55287 22.6898 3.07582C20.4105 4.59878 18.6341 6.76342 17.585 9.296C16.536 11.8286 16.2615 14.6154 16.7963 17.3039C17.3311 19.9925 18.6511 22.4621 20.5895 24.4005C22.5279 26.3389 24.9975 27.6589 27.6861 28.1937C30.3746 28.7285 33.1614 28.454 35.694 27.405C38.2266 26.3559 40.3912 24.5795 41.9142 22.3002C43.4371 20.0209 44.25 17.3412 44.25 14.6C44.2513 12.7795 43.8937 10.9766 43.1977 9.29445C42.5016 7.61228 41.4807 6.08384 40.1934 4.79656C38.9062 3.50928 37.3777 2.48841 35.6956 1.79235C34.0134 1.09628 32.2105 0.738679 30.39 0.739994ZM30.39 24.4C28.4517 24.4 26.557 23.8252 24.9454 22.7484C23.3338 21.6716 22.0777 20.141 21.336 18.3503C20.5942 16.5596 20.4002 14.5891 20.7783 12.6881C21.1564 10.7871 22.0898 9.0409 23.4604 7.67035C24.8309 6.29979 26.5771 5.36643 28.4781 4.9883C30.3791 4.61016 32.3496 4.80424 34.1403 5.54597C35.931 6.28771 37.4616 7.5438 38.5384 9.15541C39.6152 10.767 40.19 12.6617 40.19 14.6C40.19 17.1991 39.1575 19.6918 37.3197 21.5296C35.4818 23.3675 32.9891 24.4 30.39 24.4Z"
            fill="#010101"
          />
          <path
            d="M21.6 25.34L9.19001 42.44C8.96098 42.7539 8.79762 43.1109 8.70971 43.4894C8.62179 43.8679 8.61112 44.2603 8.67834 44.6431C8.74555 45.0258 8.88927 45.3911 9.1009 45.717C9.31253 46.043 9.58772 46.3229 9.91001 46.54C10.2343 46.7572 10.599 46.907 10.9824 46.9804C11.3658 47.0538 11.76 47.0493 12.1416 46.9672C12.5232 46.8851 12.8844 46.727 13.2036 46.5025C13.5229 46.2779 13.7937 45.9914 14 45.66L25.12 27.66C23.8367 27.068 22.6501 26.2858 21.6 25.34Z"
            fill="#000"
          />
        </svg>
      </button>
    </form>
  </div>
</template>

<script>
import { mapMutations } from "vuex";

export default {
  name: "Search",
  data() {
    return {
      searchLine: "",
      showSearch: true,
      showInput: false,
    };
  },
  methods: {
    ...mapMutations(["searchfilteredCards"]),
    showField() {
      this.showSearch = false;
      this.showInput = true;
    },
    filter(value) {
      this.searchfilteredCards(value);
    },
  },
};
</script>

<style lang="scss" scoped>
.search {
  display: flex;
  &-show {
    width: 42px;
    display: flex;
    align-items: center;
    justify-content: center;
    cursor: pointer;
  }
  &-form {
    max-width: 360px;
    display: flex;
    &-field {
      width: 100%;
      font-size: 20px;
      padding: 8px 10px;
      border: none;
      color: #fff;
      background: transparent;
      border-bottom: 3px solid rgba(255, 255, 255, 0.25);
      transition: border 0.2s ease;
      &:hover {
        border-color: #fff;
      }
      &:focus {
        border-color: #f16d7f;
      }
    }
    &-btn {
      width: 42px;
      display: flex;
      align-items: center;
      justify-content: center;
      transition: background 0.2s ease;
      svg path {
        fill: #fff;
      }
      &:hover {
        background: rgba(255, 255, 255, 0.25);
      }
    }
  }
}

@media (max-width: 470px) {
  .search {
    .search-form {
      max-width: 224px;
    }
  }
}
</style>
